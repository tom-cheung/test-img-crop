(this["webpackJsonpimage-cropper-popup"]=this["webpackJsonpimage-cropper-popup"]||[]).push([[0],{37:function(e,t,i){},38:function(e,t,i){},39:function(e,t,i){},48:function(e,t,i){"use strict";i.r(t);var n=i(1),o=i.n(n),s=i(23),a=i.n(s),r=i(26),c=i(2),d=i(6),h=i(7),p=i(13),u=i(10),l=i(9),g=i(28),m=i(20),f=i.n(m),v=i(24);function y(e,t){var i;return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];clearTimeout(i),i=setTimeout((function(){return e.apply(void 0,o)}),t)}}function w(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.forEach((function(t){return Object.keys(t).forEach((function(i){return e[i]=t[i]}))})),e}var x={position:"relative",overflow:"hidden"},O={position:"absolute",top:"0",right:"0",bottom:"0",left:"0"},j={minHeight:"100%",minWidth:"100%"},b={height:"100%",width:"100%",border:"none",opacity:0,zIndex:-1,pointerEvents:"none"},C={debounceTime:17,updateOnWindowResize:!0,updateOnContainerResize:!1,containerPosition:"relative"},S=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,e),this.setFocus=function(e){i.focus=e,void 0!==i.focus&&(i.img.setAttribute("data-focus-x",e.x.toString()),i.img.setAttribute("data-focus-y",e.y.toString()),i.applyShift())},this.applyShift=function(){var e=i.img,t=e.naturalWidth,n=e.naturalHeight,o=i.container.getBoundingClientRect(),s=o.width,a=o.height,r="0",c="0";if(!(s>0&&a>0&&t>0&&n>0))return!1;var d=t/s,h=n/a;i.img.style.maxHeight=null,i.img.style.maxWidth=null,t>s&&n>a&&(i.img.style[d>h?"maxHeight":"maxWidth"]="100%"),void 0!==i.focus&&(d>h?r="".concat(i.calcShift(h,s,t,i.focus.x),"%"):d<h&&(c="".concat(i.calcShift(d,a,n,i.focus.y,!0),"%"))),i.img.style.top=c,i.img.style.left=r},this.options=w(C,n),this.img=t,this.container=t.parentElement,this.img.__focused_image_instance__&&(this.img.__focused_image_instance__.stopListening(),this.img.removeEventListener("load",this.applyShift)),this.img.__focused_image_instance__=this,this.img.addEventListener("load",this.applyShift),w(this.container.style,x),this.container.style.position=this.options.containerPosition,w(this.img.style,j,O),this.debounceApplyShift=y(this.applyShift,this.options.debounceTime),this.focus=this.options.focus?this.options.focus:{x:parseFloat(this.img.getAttribute("data-focus-x"))||0,y:parseFloat(this.img.getAttribute("data-focus-y"))||0},this.startListening(),void 0!==this.focus&&this.setFocus(this.focus)}return Object(h.a)(e,[{key:"startListening",value:function(){var e=this;if(!this.listening&&(this.listening=!0,this.options.updateOnWindowResize&&window.addEventListener("resize",this.debounceApplyShift),this.options.updateOnContainerResize)){var t=document.createElement("object");w(t.style,b,O),t.addEventListener("load",(function(){return t.contentDocument.defaultView.addEventListener("resize",(function(){return e.debounceApplyShift()}))})),t.type="text/html",t.setAttribute("aria-hidden","true"),t.tabIndex=-1,this.container.appendChild(t),t.data="about:blank",this.resizeListenerObject=t}}},{key:"stopListening",value:function(){this.listening&&(this.listening=!1,window.removeEventListener("resize",this.debounceApplyShift),this.resizeListenerObject&&this.resizeListenerObject.contentDocument&&(this.resizeListenerObject.contentDocument.defaultView.removeEventListener("resize",this.debounceApplyShift),this.container.removeChild(this.resizeListenerObject),this.resizeListenerObject=null))}},{key:"calcShift",value:function(e,t,i,n,o){var s=Math.floor(t/2),a=(n+1)/2,r=Math.floor(i/e),c=Math.floor(a*r);o&&(c=r-c);var d=c-s,h=r-c,p=t-s;return h<p&&(d-=p-h),d<0&&(d=0),-100*d/t}}]),e}(),D=i(17),A=i.n(D),I=(i(35),i.p+"static/media/retina.8ac97b6d.svg"),E={display:"block",maxWidth:"100%",touchAction:"none"},N={position:"absolute",cursor:"move",transform:"translate(-50%, -50%)"},L={onChange:function(){},retina:I},k=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(d.a)(this,e),this.event=function(e){e.preventDefault(),e.stopPropagation(),i.retina.removeEventListener("mousedown",i.startDragging)},this.startDragging=function(e){A()("#retina").draggable({containment:"#test-container"}),e.preventDefault(),e.stopPropagation(),i.isDragging=!0,e instanceof MouseEvent?i.updateCoordinates(e.clientX,e.clientY):i.updateCoordinates(e.touches[0].clientX,e.touches[0].clientY)},this.handleMove=function(e){if(A()("#retina").draggable({containment:"#test-container",scroll:!1}),e.preventDefault(),e instanceof MouseEvent)i.updateCoordinates(e.clientX,e.clientY);else{var t=e.touches[0],n=document.elementFromPoint(t.pageX,t.pageY);n!==i.retina&&n!==i.container?i.stopDragging():i.updateCoordinates(t.clientX,t.clientY)}},this.stopDragging=function(){i.isDragging=!1},this.updateRetinaPositionFromFocus=function(){i.updateRetinaPosition(i.calculateOffsetFromFocus())},this.updateRetinaPosition=function(e){i.retina.style.top="".concat(e.offsetY-20,"px"),i.retina.style.left="".concat(e.offsetX-20,"px")},this.options=w({},L,n),this.img=t,this.container=document.getElementById("test-container"),document.getElementById("retina")?this.retina=document.getElementById("retina"):(this.retina=document.createElement("img"),this.retina.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAnFBMVEUAAACqqqrMzMyqqqrV1dW2trYAAAAHBwfGxsYcHBzHx8cfHx8hISHIyMjGxsbJycnIyMhXV1dYWFh4eHh5eXnT09Ofn5/S0tKfn5+hoaGioqKjo6OkpKSlpaWmpqbX19fY2NjY2NjZ2dnY2Njj4+Pd3d3j4+Pd3d3e3t7k5OTl5eXk5OTl5eXl5eXp6enq6urr6+vr6+vu7u7///+LRybgAAAAM3RSTlMAAwUGBgdMTVFSUlNUVFVVWGRlcXKFh4eIiImKiouMmpucnJ7BwsLDw8PDxMTF09PU2NvakuVfAAAAAWJLR0QzN9V8XgAAALtJREFUGNNtkNkOgkAQBAdUUBA5BAUFReTyXLf//+OEDSAbrLepZDI9TdSycLLy8ykzZ0EDmxc6nlanlD1QxO5q5cYVEChC7sF3uibQQ45A7IJvtQGfw2huvBBqIyI8ZuSg0MdSr2HTFUdNIkFKN7iy9FASgylLE2wq13j/X78gluUJ5yZSNY00fyIay0MbnixwX3pz2T4fgEd9IYeuEFICoE480/SSeqiOyLj3Jd+NX/WqneaM5amtivEL0wgahXIx7KIAAAAASUVORK5CYII=",this.retina.id="retina",this.retina.className="ui-widget-content draggable",this.retina.draggable=!0,document.getElementById("test-container").appendChild(this.retina)),this.img.draggable=!1,this.startListening(),w(this.img.style,E),w(this.retina.style,N);var o=document.getElementById("test-container");this.focus=this.options.focus?this.options.focus:{x:parseFloat(o.getAttribute("data-focus-x"))||0,y:parseFloat(o.getAttribute("data-focus-y"))||0},this.retina.style.top||this.retina.style.left||this.setFocus(this.focus)}return Object(h.a)(e,[{key:"startListening",value:function(){this.retina.addEventListener("click",this.event),this.retina.addEventListener("mousedown",this.startDragging),this.container.addEventListener("mousemove",this.handleMove),this.container.addEventListener("mouseup",this.stopDragging),this.container.addEventListener("mouseleave",this.stopDragging),this.container.addEventListener("touchend",this.stopDragging),this.retina.addEventListener("touchstart",this.startDragging,{passive:!0}),this.container.addEventListener("touchmove",this.handleMove,{passive:!0}),this.container.addEventListener("load",this.updateRetinaPositionFromFocus)}},{key:"stopListening",value:function(){this.retina.removeEventListener("mousedown",this.startDragging),this.container.removeEventListener("mousemove",this.handleMove),this.container.removeEventListener("mouseup",this.stopDragging),this.container.removeEventListener("mouseleave",this.stopDragging),this.container.removeEventListener("touchend",this.stopDragging),this.retina.removeEventListener("touchstart",this.startDragging),this.container.removeEventListener("touchmove",this.handleMove),this.container.removeEventListener("load",this.updateRetinaPositionFromFocus)}},{key:"setFocus",value:function(e){this.focus=e;var t=document.getElementById("test-container");t.setAttribute("data-focus-x",e.x.toString()),t.setAttribute("data-focus-y",e.y.toString()),this.updateRetinaPositionFromFocus(),this.options.onChange(e)}},{key:"calculateOffsetFromFocus",value:function(){var e=window.getComputedStyle(document.getElementById("test-container")),t=parseFloat(e.getPropertyValue("height"));return{offsetX:parseFloat(e.getPropertyValue("width"))*(this.focus.x/2+.5),offsetY:t*(this.focus.y/-2+.5)}}},{key:"updateCoordinates",value:function(e,t){if(this.isDragging){var i=window.getComputedStyle(document.getElementById("test-container")),n=parseFloat(i.getPropertyValue("height")),o=parseFloat(i.getPropertyValue("width")),s=parseFloat(i.getPropertyValue("top")),a=parseFloat(i.getPropertyValue("left")),r=document.getElementById("image-tool").getBoundingClientRect().top+35,c=2*((e-a-document.getElementById("image-tool").getBoundingClientRect().left)/o-.5),d=-2*((t-s-r)/n-.5);this.setFocus({x:c,y:d})}}}]),e}(),R=i(12),M=i(29),F=i(25),P=i(0),_=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return _=!0,!0}}))}catch(Q){}function W(e){var t,i;if(e.stopPropagation(),e.touches){var n=Object(M.a)(e.touches,1)[0];t=n.pageX,i=n.pageY}else t=e.pageX,i=e.pageY;return{x:t,y:i}}function T(e,t,i){return Math.min(Math.max(e,t),i)}function Y(e){return e&&!isNaN(e.width)&&!isNaN(e.height)}function X(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function B(e,t,i){if(isNaN(e.aspect))return console.warn("`crop.aspect` should be a number in order to make an aspect crop",e),e;var n=Object(R.a)({unit:"px",x:0,y:0},e);return e.width&&(n.height=n.width/e.aspect),e.height&&(n.width=n.height*e.aspect),n.y+n.height>i&&(n.height=i-n.y,n.width=n.height*e.aspect),n.x+n.width>t&&(n.width=t-n.x,n.height=n.width/e.aspect),n}function U(e,t,i){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/i*100,width:e.width/t*100,height:e.height/i*100}}function z(e,t,i){return e.unit?"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*i/100,width:e.width*t/100,height:e.height*i/100}:Object(R.a)(Object(R.a)({},e),{},{unit:"px"})}var H=function(e){Object(u.a)(i,e);var t=Object(l.a)(i);function i(){var e;Object(d.a)(this,i);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).window="undefined"!==typeof window?window:{},e.document="undefined"!==typeof document?document:{},e.state={},e.keysDown=new Set,e.onCropMouseTouchDown=function(t){t.stopPropagation();var i=e.props,n=i.crop,o=i.disabled,s=e.mediaDimensions,a=z(n,s.width,s.height);if(!o){t.preventDefault();var r=W(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var c,d=t.target.dataset.ord,h="nw"===d||"w"===d||"sw"===d,p="nw"===d||"n"===d||"ne"===d;a.aspect&&(c=e.getElementOffset(e.cropSelectRef)),e.evData={clientStartX:r.x,clientStartY:r.y,cropStartWidth:a.width,cropStartHeight:a.height,cropStartX:h?a.x+a.width:a.x,cropStartY:p?a.y+a.height:a.y,xInversed:h,yInversed:p,xCrossOver:h,yCrossOver:p,startXCrossOver:h,startYCrossOver:p,isResize:t.target.dataset.ord,ord:d,cropOffset:c},e.mouseDownOnCrop=!0,e.setState({cropIsActive:!0})}},e.onComponentMouseTouchDown=function(t){t.stopPropagation();var i=e.props,n=i.crop,o=i.disabled,s=i.locked,a=i.keepSelection,r=i.onChange,c=e.mediaWrapperRef.firstChild;if(t.target===c&&c.contains(t.target)&&!(o||s||a&&Y(n))){t.preventDefault();var d=W(t);e.componentRef.setActive?e.componentRef.setActive({preventScroll:!0}):e.componentRef.focus({preventScroll:!0});var h=e.getElementOffset(e.mediaWrapperRef),p=d.x-h.left,u=d.y-h.top,l={unit:"px",aspect:n?n.aspect:void 0,x:p,y:u,width:0,height:0};e.evData={clientStartX:d.x,clientStartY:d.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:l.x,cropStartY:l.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},e.mouseDownOnCrop=!0;var g=e.mediaDimensions,m=g.width,f=g.height;r(z(l,m,f),U(l,m,f)),e.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}},e.onDocMouseTouchMove=function(t){t.stopPropagation();var i=e.props,n=i.crop,o=i.disabled,s=i.onChange,a=i.onDragStart;if(!o&&e.mouseDownOnCrop){t.preventDefault(),e.dragStarted||(e.dragStarted=!0,a(t));var r,c=Object(p.a)(e).evData,d=W(t);if(c.isResize&&n.aspect&&c.cropOffset&&(d.y=e.straightenYPath(d.x)),c.xDiff=d.x-c.clientStartX,c.yDiff=d.y-c.clientStartY,(r=c.isResize?e.resizeCrop():e.dragCrop())!==n){var h=e.mediaDimensions,u=h.width,l=h.height;s(z(r,u,l),U(r,u,l))}}},e.onComponentKeyDown=function(t){t.stopPropagation();var n=e.props,o=n.crop,s=n.disabled,a=n.onChange,r=n.onComplete;if(!s){e.keysDown.add(t.key);var c=!1;if(Y(o)){var d=e.makeNewCrop(),h=(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)?i.nudgeStepLarge:t.shiftKey?i.nudgeStepMedium:i.nudgeStep;if(e.keysDown.has("ArrowLeft")&&(d.x-=h,c=!0),e.keysDown.has("ArrowRight")&&(d.x+=h,c=!0),e.keysDown.has("ArrowUp")&&(d.y-=h,c=!0),e.keysDown.has("ArrowDown")&&(d.y+=h,c=!0),c){t.preventDefault();var p=e.mediaDimensions,u=p.width,l=p.height;d.x=T(d.x,0,u-d.width),d.y=T(d.y,0,l-d.height);var g=z(d,u,l),m=U(d,u,l);a(g,m),r(g,m)}}}},e.onComponentKeyUp=function(t){t.stopPropagation(),e.keysDown.delete(t.key)},e.onDocMouseTouchEnd=function(t){t.stopPropagation();var i=e.props,n=i.crop,o=i.disabled,s=i.onComplete,a=i.onDragEnd;if(!o&&e.mouseDownOnCrop){e.mouseDownOnCrop=!1,e.dragStarted=!1;var r=e.mediaDimensions,c=r.width,d=r.height;a(t),s(z(n,c,d),U(n,c,d)),e.setState({cropIsActive:!1,newCropIsBeingDrawn:!1})}},e.onMediaLoaded=function(){var t=e.props,i=t.onComplete,n=t.onChange,o=e.createNewCrop(),s=o.pixelCrop,a=o.percentCrop;n(s,a),i(s,a)},e.updateRetinaPositionFromFocus=function(){e.updateRetinaPosition(e.calculateOffsetFromFocus())},e.updateRetinaPosition=function(e){var t=document.getElementById("retina");t&&(t.style.top="".concat(e.offsetY-20,"px"),t.style.left="".concat(e.offsetX-20,"px"))},e}return Object(h.a)(i,[{key:"componentDidMount",value:function(){if(this.document.addEventListener){var e=!!_&&{passive:!1};this.document.addEventListener("mousemove",this.onDocMouseTouchMove,e),this.document.addEventListener("touchmove",this.onDocMouseTouchMove,e),this.document.addEventListener("mouseup",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchend",this.onDocMouseTouchEnd,e),this.document.addEventListener("touchcancel",this.onDocMouseTouchEnd,e),this.componentRef.addEventListener("medialoaded",this.onMediaLoaded)}}},{key:"componentWillUnmount",value:function(){this.document.removeEventListener&&(this.document.removeEventListener("mousemove",this.onDocMouseTouchMove),this.document.removeEventListener("touchmove",this.onDocMouseTouchMove),this.document.removeEventListener("mouseup",this.onDocMouseTouchEnd),this.document.removeEventListener("touchend",this.onDocMouseTouchEnd),this.document.removeEventListener("touchcancel",this.onDocMouseTouchEnd),this.componentRef.removeEventListener("medialoaded",this.onMediaLoaded))}},{key:"componentDidUpdate",value:function(e){var t=this.props.crop;if(this.imageRef&&e.crop!==t&&t.aspect&&(t.width&&!t.height||!t.width&&t.height)){var i=this.imageRef,n=i.width,o=i.height,s=B(this.makeNewCrop(),n,o),a=z(s,n,o),r=U(s,n,o);this.props.onChange(a,r),this.props.onComplete(a,r)}}},{key:"createNewCrop",value:function(){var e=this.mediaDimensions,t=e.width,i=e.height,n=function(e,t,i){return!e.aspect||e.width&&e.height?e:B(e,t,i)}(this.makeNewCrop(),t,i);return{pixelCrop:z(n,t,i),percentCrop:U(n,t,i)}}},{key:"onImageLoad",value:function(e){var t=this.props,i=t.onComplete,n=t.onChange;if(!1!==(0,t.onImageLoaded)(e)){var o=this.createNewCrop(),s=o.pixelCrop,a=o.percentCrop;n(s,a),i(s,a)}}},{key:"mediaDimensions",get:function(){var e=this.mediaWrapperRef;return{width:e.clientWidth,height:e.clientHeight}}},{key:"getDocumentOffset",value:function(){var e=this.document.documentElement||{},t=e.clientTop,i=void 0===t?0:t,n=e.clientLeft;return{clientTop:i,clientLeft:void 0===n?0:n}}},{key:"getWindowOffset",value:function(){var e=this.window,t=e.pageYOffset,i=void 0===t?0:t,n=e.pageXOffset;return{pageYOffset:i,pageXOffset:void 0===n?0:n}}},{key:"getElementOffset",value:function(e){var t=e.getBoundingClientRect(),i=this.getDocumentOffset(),n=this.getWindowOffset();return{top:t.top+n.pageYOffset-i.clientTop,left:t.left+n.pageXOffset-i.clientLeft}}},{key:"getCropStyle",value:function(){var e=this.makeNewCrop(this.props.crop?this.props.crop.unit:"px");return{top:"".concat(e.y).concat(e.unit),left:"".concat(e.x).concat(e.unit),width:"".concat(e.width).concat(e.unit),height:"".concat(e.height).concat(e.unit)}}},{key:"getNewSize",value:function(){var e,t=this.props,i=t.crop,n=t.minWidth,o=t.maxWidth,s=t.minHeight,a=t.maxHeight,r=this.evData,c=this.mediaDimensions,d=c.width,h=c.height,p=r.cropStartWidth+r.xDiff;return r.xCrossOver&&(p=Math.abs(p)),p=T(p,n,o||d),e=i.aspect?p/i.aspect:r.cropStartHeight+r.yDiff,r.yCrossOver&&(e=Math.min(Math.abs(e),r.cropStartY)),e=T(e,s,a||h),i.aspect&&(p=T(e*i.aspect,0,d)),{width:p,height:e}}},{key:"dragCrop",value:function(){var e=this.makeNewCrop(),t=this.evData,i=this.mediaDimensions,n=i.width,o=i.height;return e.x=T(t.cropStartX+t.xDiff,0,n-e.width),e.y=T(t.cropStartY+t.yDiff,0,o-e.height),e}},{key:"calculateOffsetFromFocus",value:function(){var e=document.getElementById("test-container"),t=window.getComputedStyle(e),i=parseFloat(t.getPropertyValue("height"));return{offsetX:parseFloat(t.getPropertyValue("width"))*(parseFloat(e.getAttribute("data-focus-x"))/2+.5),offsetY:i*(parseFloat(e.getAttribute("data-focus-y"))/-2+.5)}}},{key:"resizeCrop",value:function(){var e=this.evData,t=this.makeNewCrop(),n=e.ord;this.updateRetinaPositionFromFocus(),e.xInversed&&(e.xDiff-=2*e.cropStartWidth,e.xDiffPc-=2*e.cropStartWidth),e.yInversed&&(e.yDiff-=2*e.cropStartHeight,e.yDiffPc-=2*e.cropStartHeight);var o=this.getNewSize(),s=e.cropStartX,a=e.cropStartY;e.xCrossOver&&(s=t.x+(t.width-o.width)),e.yCrossOver&&(a=!1===e.lastYCrossover?t.y-o.height:t.y+(t.height-o.height));var r=this.mediaDimensions,c=r.width,d=r.height,h=function(e,t,i,n){var o=z(t,i,n),s=z(e,i,n),a=Object(R.a)({},o);if(!o.aspect)return o.x<0?(a.x=0,a.width+=o.x):o.x+o.width>i&&(a.width=i-o.x),o.y+o.height>n&&(a.height=n-o.y),a;var r=!1;o.x<0?(a.x=0,a.width+=o.x,a.height=a.width/o.aspect,r=!0):o.x+o.width>i&&(a.width=i-o.x,a.height=a.width/o.aspect,r=!0),r&&s.y>a.y&&(a.y=o.y+(o.height-a.height));var c=!1;return a.y+a.height>n&&(a.height=n-o.y,a.width=a.height*o.aspect,c=!0),c&&s.x>a.x&&(a.x=o.x+(o.width-a.width)),a}(this.props.crop,{unit:t.unit,x:s,y:a,width:o.width,height:o.height,aspect:t.aspect},c,d);return t.aspect||i.xyOrds.indexOf(n)>-1?(t.x=h.x,t.y=h.y,t.width=h.width,t.height=h.height):i.xOrds.indexOf(n)>-1?(t.x=h.x,t.width=h.width):i.yOrds.indexOf(n)>-1&&(t.y=h.y,t.height=h.height),e.lastYCrossover=e.yCrossOver,this.crossOverCheck(),t}},{key:"straightenYPath",value:function(e){var t,i,n=this.evData,o=n.ord,s=n.cropOffset,a=n.cropStartWidth,r=n.cropStartHeight;return"nw"===o||"se"===o?(t=r/a,i=s.top-s.left*t):(t=-r/a,i=s.top+(r-s.left*t)),t*e+i}},{key:"createCropSelection",value:function(){var e=this,t=this.props,i=t.disabled,n=t.locked,o=t.renderSelectionAddon,s=t.ruleOfThirds,a=t.crop,r=this.getCropStyle();return Object(P.jsxs)("div",{ref:function(t){return e.cropSelectRef=t},style:r,id:"test-container","data-focus-x":"0","data-focus-y":"0",className:"ReactCrop__crop-selection ui-widget-content draggable",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown,children:[!i&&!n&&Object(P.jsxs)("div",{className:"ReactCrop__drag-elements",children:[Object(P.jsx)("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),Object(P.jsx)("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),Object(P.jsx)("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),Object(P.jsx)("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),Object(P.jsx)("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})]}),o&&Y(a)&&Object(P.jsx)("div",{className:"ReactCrop__selection-addon",onMouseDown:function(e){return e.stopPropagation()},children:o(this.state)}),s&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"ReactCrop__rule-of-thirds-hz"}),Object(P.jsx)("div",{className:"ReactCrop__rule-of-thirds-vt"})]})]})}},{key:"makeNewCrop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"px",t=Object(R.a)(Object(R.a)({},i.defaultCrop),this.props.crop),n=this.mediaDimensions,o=n.width,s=n.height;return"px"===e?z(t,o,s):U(t,o,s)}},{key:"crossOverCheck",value:function(){var e=this.evData,t=this.props,i=t.minWidth,n=t.minHeight;!i&&(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiff<=0)&&(e.xCrossOver=!e.xCrossOver),!n&&(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiff<=0)&&(e.yCrossOver=!e.yCrossOver);var o=e.xCrossOver!==e.startXCrossOver,s=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!o&&X(e.ord),e.inversedYOrd=!!s&&X(e.ord)}},{key:"render",value:function(){var e=this,t=this.props,i=t.children,n=t.circularCrop,o=t.className,s=t.crossorigin,a=t.crop,r=t.disabled,c=t.locked,d=t.imageAlt,h=t.onImageError,p=t.renderComponent,u=t.src,l=t.style,g=t.imageStyle,m=t.ruleOfThirds,f=this.state,v=f.cropIsActive,y=f.newCropIsBeingDrawn,w=Y(a)&&this.componentRef?this.createCropSelection():null,x=Object(F.a)("ReactCrop",o,{"ReactCrop--active":v,"ReactCrop--disabled":r,"ReactCrop--locked":c,"ReactCrop--new-crop":y,"ReactCrop--fixed-aspect":a&&a.aspect,"ReactCrop--circular-crop":a&&n,"ReactCrop--rule-of-thirds":a&&m,"ReactCrop--invisible-crop":!this.dragStarted&&a&&!a.width&&!a.height});return Object(P.jsx)("div",{ref:function(t){e.componentRef=t},className:x,style:l,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"0",onKeyDown:this.onComponentKeyDown,onKeyUp:this.onComponentKeyUp,children:Object(P.jsxs)("div",{ref:function(t){e.mediaWrapperRef=t},children:[p||Object(P.jsx)("img",{id:"focus-picker-img","data-focus-x":"0","data-focus-y":"0",ref:function(t){return e.imageRef=t},crossOrigin:s,className:"ReactCrop__image",style:g,src:u,onLoad:function(t){return e.onImageLoad(t.target)},onError:h,alt:d}),i,w]})})}}]),i}(n.PureComponent);H.xOrds=["e","w"],H.yOrds=["n","s"],H.xyOrds=["nw","ne","se","sw"],H.nudgeStep=1,H.nudgeStepMedium=10,H.nudgeStepLarge=100,H.defaultCrop={x:0,y:0,width:0,height:0,unit:"px"},H.defaultProps={circularCrop:!1,className:void 0,crop:void 0,crossorigin:void 0,disabled:!1,locked:!1,imageAlt:"",maxWidth:void 0,maxHeight:void 0,minWidth:0,minHeight:0,keepSelection:!1,onComplete:function(){},onImageError:function(){},onImageLoaded:function(){},onDragStart:function(){},onDragEnd:function(){},children:void 0,style:void 0,renderComponent:void 0,imageStyle:void 0,renderSelectionAddon:void 0,ruleOfThirds:!1};i(37),i(38);var V=function(e){Object(u.a)(i,e);var t=Object(l.a)(i);function i(){var e;Object(d.a)(this,i);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={crop:{unit:"px",width:100,height:100}},e.onImageLoaded=function(t){e.imageRef=t},e.onCropComplete=function(t){if(e.makeClientCrop(t),e.state.croppedImageUrl){var i=document.querySelectorAll(".focused-image"),n=[];Array.prototype.forEach.call(i,(function(e){n.push(new S(e))}));var o=document.getElementById("focus-picker-img");new k(o,{onChange:function(t){var i=t.x.toFixed(2),o=t.y.toFixed(2);e.setState({newFocus:{x:parseFloat(i),y:parseFloat(o)}}),n.forEach((function(t){t.setFocus(e.state.newFocus)}))},focus:e.state.newFocus})}},e.onCropChange=function(t){e.setState({crop:t})},e}return Object(h.a)(i,[{key:"makeClientCrop",value:function(){var e=Object(v.a)(f.a.mark((function e(t){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:i=e.sent,this.setState({croppedImageUrl:i});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,i){var n=this,o=document.createElement("canvas"),s=e.naturalWidth/e.width,a=e.naturalHeight/e.height;o.width=t.width,o.height=t.height;var r=o.getContext("2d"),c={};return e.crossOrigin="anonymous",r.drawImage(e,t.x*s,t.y*a,t.width*s,t.height*a,0,0,t.width,t.height),c.cropWidth=e.naturalWidth*t.width/e.width,c.cropHeight=e.naturalHeight*t.height/e.height,c.cropX=e.naturalWidth*t.x/e.width,c.cropY=e.naturalHeight*t.y/e.height,this.setState({originalImage:c,src:this.props.src,asset:this.props.asset}),new Promise((function(e){o.toBlob((function(t){t?(t.name=i,window.URL.revokeObjectURL(n.fileUrl),n.fileUrl=window.URL.createObjectURL(t),e(n.fileUrl)):console.error("Canvas is empty")}),"image/jpeg")}))}},{key:"render",value:function(){var e=this.state,t=e.crop,i=e.croppedImageUrl;return Object(P.jsx)("div",{className:"container",id:"image-tool",children:Object(P.jsx)("div",{className:"row",children:Object(P.jsxs)("div",{className:"col",children:[Object(P.jsx)("div",{className:"image-cropper",children:this.props.src&&Object(P.jsx)(H,{src:this.props.src,crop:t,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange,keepSelection:!0})}),Object(P.jsx)("div",{className:"image-focus",onLoad:this.props.data(this.state),children:i&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h2",{children:"Preview"}),Object(P.jsxs)("div",{className:"grid previews",children:[Object(P.jsxs)("div",{className:"focus-container",children:[Object(P.jsx)("h4",{children:"Portrait"}),Object(P.jsx)("div",{className:"img-container",children:Object(P.jsxs)("div",{className:"top-left",style:{height:"177.86%",width:"100%"},children:[Object(P.jsx)("div",{style:{marginTop:"177.86%"}}),Object(P.jsx)("img",{className:"focused-image",src:i,alt:"","data-focus-x":"0","data-focus-y":"0"})]})})]}),Object(P.jsxs)("div",{className:"focus-container",children:[Object(P.jsx)("h4",{children:"Square"}),Object(P.jsx)("div",{className:"img-container",children:Object(P.jsxs)("div",{className:"top-left",style:{height:"100%",width:"100%"},children:[Object(P.jsx)("div",{style:{marginTop:"100%"}}),Object(P.jsx)("img",{className:"focused-image",src:i,alt:"","data-focus-x":"0","data-focus-y":"0"})]})})]}),Object(P.jsxs)("div",{className:"focus-container",children:[Object(P.jsx)("h4",{children:"Landscape"}),Object(P.jsx)("div",{className:"img-container",children:Object(P.jsxs)("div",{className:"top-left",style:{height:"56.25%",width:"100%"},children:[Object(P.jsx)("div",{style:{marginTop:"56.25%"}}),Object(P.jsx)("img",{className:"focused-image",src:i,alt:"","data-focus-x":"0","data-focus-y":"0"})]})})]}),Object(P.jsxs)("div",{className:"focus-container",children:[Object(P.jsx)("h4",{children:"Panorama"}),Object(P.jsx)("div",{className:"img-container",children:Object(P.jsxs)("div",{className:"top-left",style:{height:"25%",width:"100%"},children:[Object(P.jsx)("div",{style:{marginTop:"25%"}}),Object(P.jsx)("img",{className:"focused-image",src:i,alt:"","data-focus-x":"0","data-focus-y":"0"})]})})]})]})]})})]})})})}}]),i}(o.a.PureComponent),K=(i(39),function(e){Object(u.a)(i,e);var t=Object(l.a)(i);function i(){var e;return Object(d.a)(this,i),(e=t.call(this)).sendAndClose=function(t){var i=e.state,n=i.croppedImage,o=i.croppedImageObj,s=Object(g.a)(n);if(s.filter((function(e){return e.uid===o.uid})).length>0){var a=s.findIndex((function(e){return e.uid===o.uid}));s[a]=o}else s.push(o);e.setState({croppedImage:s}),t?e.props.closeWindow(s):e.props.closeWindow([])},e.update=function(t){if(t.hasOwnProperty("asset")){var i={fileName:t.hasOwnProperty("asset")&&t.asset.filename,uid:t.hasOwnProperty("asset")&&t.asset.uid,fileSize:t.hasOwnProperty("asset")&&t.asset.file_size,originalUrl:t.src,croppedUrl:t.hasOwnProperty("originalImage")&&t.src+"?disposition=inline&crop="+t.originalImage.cropWidth+","+t.originalImage.cropHeight+",x"+t.originalImage.cropX+",y"+t.originalImage.cropY,croppedCoords:t.hasOwnProperty("originalImage")&&t.originalImage,focalPoint:t.hasOwnProperty("newFocus")&&t.newFocus};e.setState({croppedImageObj:i})}},e.cropImage=function(t){e.setState({selectedImage:t})},e.state={selectedImage:void 0,croppedImage:[],croppedImageObj:void 0},e}return Object(h.a)(i,[{key:"componentDidMount",value:function(){new Portfolio(document.querySelector(".my-image-gallery"))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.croppedImage;e.croppedImage!==t?this.setState({selectedImage:e.croppedImage[0],croppedImage:e.croppedImage}):this.setState({selectedImage:e.allAssets[0]})}},{key:"render",value:function(){var e=this,t=this.state.selectedImage;return Object(P.jsx)("div",{className:"modal display-block",children:Object(P.jsxs)("section",{className:"modal-main",children:[this.props.children,Object(P.jsx)("div",{className:"modal-header",children:Object(P.jsx)("h2",{children:"Edit Images"})}),Object(P.jsx)("div",{className:"slider",children:Object(P.jsx)("div",{className:"pf-carousel my-image-gallery",children:Object(P.jsx)("div",{className:"pf-slider",children:this.props.allAssets.length>0&&this.props.allAssets.map((function(t,i){return Object(P.jsx)("div",{className:"pf-item",children:Object(P.jsx)("img",{src:t.url,alt:t.title,className:"carousel-img",id:t.uid,onClick:function(){return e.cropImage(t)}})},i)}))})})}),Object(P.jsx)("div",{className:"modal-body",children:Object(P.jsx)(V,{src:void 0!==t&&t.url,asset:t&&t,data:this.update})}),Object(P.jsx)("div",{className:"modal-footer",children:Object(P.jsxs)("div",{className:"right",children:[Object(P.jsx)("button",{className:"cancel-btn btn",onClick:function(){return e.sendAndClose(!1)},children:"Cancel"}),Object(P.jsx)("button",{className:"add-btn btn",onClick:function(){return e.sendAndClose(!0)},children:"Save"})]})})]})})}}]),i}(o.a.PureComponent)),q=function(e){Object(u.a)(i,e);var t=Object(l.a)(i);function i(e){var n;return Object(d.a)(this,i),(n=t.call(this,e)).onCloseWindow=function(e){e.length>0?window.opener.postMessage({message:"sending cropped image",croppedImage:e},"*"):window.opener.postMessage({message:"Window closed sending cropped image"},"*"),window.close()},n.state={message:"",config:void 0,croppedImage:[],allAssets:[]},n.onCloseWindow=n.onCloseWindow.bind(Object(p.a)(n)),n}return Object(h.a)(i,[{key:"componentDidMount",value:function(){var e=this;window.opener||window.close(),window.opener.postMessage({message:"get config and other data",getConfig:!0},"*");window.addEventListener("message",(function(t){var i=t.data;i.config&&e.setState({message:i.message,config:i.config}),i.croppedImage&&e.setState({message:i.message,croppedImage:i.croppedImage}),i.allImages&&e.setState({message:i.message,allAssets:i.allImages.assets})}),!1)}},{key:"render",value:function(){var e=this.state,t=e.config,i=e.croppedImage,n=e.allAssets;return Object(P.jsx)("div",{children:t&&Object(P.jsx)(K,{config:t,closeWindow:this.onCloseWindow,croppedImage:i,allAssets:n})})}}]),i}(o.a.Component);var J=function(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(r.a,{children:Object(P.jsx)(c.c,{children:Object(P.jsx)(c.a,{exact:!0,path:"/",component:q})})})})},G=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,49)).then((function(t){var i=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;i(e),n(e),o(e),s(e),a(e)}))};a.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(J,{})}),document.getElementById("root")),G()}},[[48,1,2]]]);